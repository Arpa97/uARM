#!/bin/bash

qtchooser >> /dev/null 2> /dev/null
QMAKERET=`echo $?`

if [ $QMAKERET -ne 127 ]; then
  VERSION=0
  for v in `qtchooser -l`; do
    if [[ $v == 5* ]]; then
	VERSION=`echo $v`
	break
    fi
  done
  if [ "$VERSION" == 0 ]; then
    echo "!!!!!!!! it seems you don't have qt5 installed, aborting compilation !!!!!!!!"
    exit 1
  fi
  QMCOMP="qtchooser -run-tool=qmake -qt=$VERSION"
  echo "compiler command: \"$QMCOMP\""
else
  echo "!!!!!!!! it seems you don't have qt5 installed, aborting compilation !!!!!!!!"
  exit 1
fi

./configure

$QMCOMP elf2uarm.pro
make
make clean

$QMCOMP mkdev.pro
make
make clean

$QMCOMP qarm.pro
make
make clean
